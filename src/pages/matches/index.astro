---
import Layout from "../../layouts/Layout.astro";
import { MatchListPageComponent } from "@/components/matches/match-list-page/match-list-page.component";

// Middleware już sprawdza autentykację automatycznie
// Tutaj tylko pobieramy dane użytkownika dla UI

const supabase = Astro.locals.supabase;
const { data: { user } } = await supabase.auth.getUser();

// Pobranie danych użytkownika dla layoutu
const userName = user?.user_metadata?.full_name || user?.email || 'Trener';
const userEmail = user?.email || '';
const userInitials = userName
  .split(' ')
  .map(n => n[0])
  .join('')
  .toUpperCase()
  .slice(0, 2);

export const prerender = false;
---

<Layout title="Spin Flow - Moje mecze">
  <MatchListPageComponent
    client:only="angular"
    userName={userName}
    userEmail={userEmail}
    userInitials={userInitials}
  />
</Layout>

