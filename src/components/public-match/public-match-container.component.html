<div class="public-match-container min-h-screen flex flex-col bg-surface-ground">
  <!-- Simple Header with Dark Mode Toggle -->
  <nav class="bg-surface-0 border-b border-surface-200 sticky top-0 z-50 shadow-sm">
    <div class="max-w-screen-xl mx-auto px-6 md:px-8 h-16 flex items-center justify-between gap-4">
      <!-- Logo -->
      <a
        href="/"
        class="flex items-center gap-3 shrink-0"
        style="text-decoration: none;"
        aria-label="Spin Flow - strona główna"
      >
        <img
          [src]="logoPath()"
          alt="Spin Flow Logo"
          width="32"
          height="32"
          class="block"
        />
        <span class="text-lg font-semibold text-surface-900">Spin Flow</span>
      </a>

      <!-- Dark Mode Toggle -->
      <a
        class="flex items-center justify-center p-2 bg-surface-0 rounded-lg border border-surface-200 hover:bg-surface-100 cursor-pointer transition-colors"
        (click)="toggleDarkMode()"
        [attr.aria-label]="themeService.isDarkMode() ? 'Przełącz na tryb jasny' : 'Przełącz na tryb ciemny'"
      >
        <i [class]="darkModeIconClass()"></i>
      </a>
    </div>
  </nav>

  <!-- Stan: Loading -->
  @if (state() === 'loading') {
    <app-match-skeleton />
  }

  <!-- Stan: Error -->
  @if (state() === 'error') {
    <app-error-page errorType="match_not_found" />
  }

  <!-- Stan: Success -->
  @if (state() === 'success' && matchData()) {
    <main class="public-match-main min-h-[calc(100vh-4rem)] bg-surface-50">
      <div class="public-match-content flex flex-col gap-4 md:gap-5 max-w-[28rem] md:max-w-[42rem] mx-auto px-4 py-4 md:py-5">
        <!-- Hero Section - Wynik meczu -->
        <app-match-header-section
          [playerName]="playerName()!"
          [opponentName]="opponentName()!"
          [startedAt]="startedAt()!"
          [setsWonPlayer]="setsWonPlayer()!"
          [setsWonOpponent]="setsWonOpponent()!"
        />

        <!-- Tabela setów -->
        <app-sets-history-table
          [sets]="sets()!"
          [currentSetId]="null"
          [playerName]="playerName()!"
          [opponentName]="opponentName()!"
        />

        <!-- Raport AI -->
        @if (aiReport()) {
          <app-ai-report-section
            [report]="aiReport()"
            [isAiEnabled]="true"
            [isRefreshing]="false"
          />
        }

        <!-- Uwagi trenera -->
        @if (hasCoachNotes()) {
          <app-coach-notes-accordion
            [matchNotes]="matchNotes()"
            [sets]="sets()!"
          />
        }
      </div>
    </main>

    <!-- Branding Footer -->
    <app-branding-footer />
  }
</div>

